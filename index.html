 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2196F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>College Hub - Material Design</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Material App Bar -->
        <header>
            <div class="header-top">
                <div>
                    <h1>ğŸ« College Hub</h1>
                    <p>Your comprehensive college management platform</p>
                </div>
                <button id="mobileMenuBtn" class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">â˜°</button>
            </div>
            
            <!-- Material Navigation -->
            <nav id="nav">
                <button id="navLogin" onclick="showSection('login'); toggleMobileMenu();">Login</button>
                <button id="navProfile" onclick="showSection('profile'); toggleMobileMenu();">Profile</button>
                <button id="navAnnouncements" onclick="showSection('announcements'); toggleMobileMenu();">Announcements</button>
                <button id="navAttendance" onclick="showSection('attendance'); toggleMobileMenu();">Attendance</button>
                <button id="navMaterials" onclick="showSection('materials'); toggleMobileMenu();">Materials</button>
                <button id="navFees" onclick="showSection('fees'); toggleMobileMenu();">Fees</button>
                <button id="navStudents" onclick="showSection('students'); toggleMobileMenu();" class="hidden">Students</button>
                <button id="navTeacher" onclick="showSection('teacherManagement'); toggleMobileMenu();" class="hidden">Manage Announcements</button>
                <button id="navPrincipal" onclick="showSection('principal'); toggleMobileMenu();" class="hidden">Principal</button>
                <button id="navAdmin" onclick="showSection('admin'); toggleMobileMenu();" class="hidden">Admin</button>
                <button id="navSuggestions" onclick="showSection('suggestions'); toggleMobileMenu();">Suggestions</button>
            </nav> 
            
            <!-- Header Actions -->
            <div id="headerActions" class="header-actions">
                <span id="userBadge" class="user-badge"></span>
                <button id="logoutBtn" onclick="logout()" class="btn-logout">Logout</button>
                <button id="deleteAccountBtn" onclick="deleteAccount()" class="btn-logout">Delete Account</button>
            </div>
        </header>

        <section id="login" class="section active">
            <h2 id="loginHeader">ğŸ” Login</h2>
            <div class="login-form">
                <select id="loginRole" class="select-small" onchange="onLoginRoleChange()">
                    <option value="student" selected>Student</option>
                    <option value="teacher">Teacher</option>
                    <option value="principal">College Principal</option>
                    <option value="admin">System Admin</option>
                </select>
                <input type="text" id="regNo" placeholder="Register Number (e.g., CS21B001)" required>
                <input type="password" id="password" placeholder="Password (e.g., DDMMYYYY)" required>
                <div class="flex-center">
                    <button onclick="login()">Login</button>
                    <button id="showSignupBtn" onclick="toggleSignup(true)" class="btn-gradient">Create account</button>
                </div>
                <div id="loginStatus"></div>
                <div id="loginSem" class="login-sem"></div>

                <div id="loginAnnouncements" class="announcements" style="margin-top:16px"></div>

                <div id="signupForm" class="signup-form">
                    <input type="text" id="signupRegNo" placeholder="Register Number (e.g., CS21B002)">
                    <input type="text" id="signupName" placeholder="Full Name (optional)">
                    <select id="signupRole" class="select-small" onchange="onSignupRoleChange()">
                        <option value="student" selected>Student</option>
                        <option value="teacher">Teacher</option>
                        <option value="principal">College Principal</option>
                    </select>
                    <input type="text" id="signupCollege" placeholder="College (optional)" class="input-small">
                    <select id="signupSemester" class="select-small">
                        <option value="">-- Semester (optional) --</option>
                        <option>1st Year</option>
                        <option>2nd Year</option>
                        <option selected>3rd Year</option>
                        <option>4th Year</option>
                    </select>
                    <div class="center-row">
                        <select id="signupDeptSelect" class="flex-1 select-small"></select>
                        <input id="signupDeptNew" placeholder="Add Dept" class="dept-new">
                        <button onclick="(function(){ const v=document.getElementById('signupDeptNew').value.trim(); if(v){ addDepartment(v); document.getElementById('signupDeptSelect').value=normalizeStr(v); document.getElementById('signupDeptNew').value=''; } })()">Add</button>
                    </div>
                    <input type="password" id="signupPassword" placeholder="Password (min 6 chars)">
                    <input type="password" id="signupPasswordConfirm" placeholder="Confirm Password">
                    <div class="center-row center-justify">
                        <button onclick="signup()">Sign Up</button>
                        <button onclick="toggleSignup(false)" class="btn-cancel">Cancel</button>
                    </div>
                    <div id="signupStatus" class="status-note"></div>
                </div> 
            </div>
        </section>

        <section id="profile" class="section">
            <h2 id="profileHeader">ğŸ‘¤ Student Profile</h2>
            <div id="profileInfo" class="status error">Please login first.</div>
        </section>

        <section id="announcements" class="section">
            <h2>ğŸ“¢ Announcements</h2>
            <div id="announceControls" class="announce-controls">
                <textarea id="announceText" placeholder="Write announcement..." rows="3" class="announce-text"></textarea>
                <div class="center-row">
                    <input type="text" id="announceCollege" placeholder="Target College (optional)" class="input-small">
                    <input type="text" id="announceDept" placeholder="Target Department (optional)" class="input-small">
                    <input type="file" id="announceFile" accept=".pdf,.png,.jpg,.jpeg" class="announce-file">
                    <button id="announcePostBtn" onclick="addAnnouncement()">Post</button>
                </div>
                <div id="announceCurrentFile" class="status-note" style="display:none"></div>
            </div> 
            <div id="announceList" class="announcements"></div>
        </section>

        <section id="attendance" class="section">
            <h2>ğŸ“Š Attendance</h2>
            <button onclick="markAttendance()" class="btn-action">Mark Attendance (Simulated GPS)</button>
            <div id="attendanceStatus" class="status"></div>
            <div class="table-responsive">
                <table id="attendanceTable">
                    <thead><tr><th>Date</th><th>Subject</th><th>Status</th><th>%</th></tr></thead>
                    <tbody>
                        <tr><td>2025-12-20</td><td>AI</td><td>Present</td><td>95%</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="materials" class="section">
            <h2>ğŸ“š Study Materials</h2>
            <div id="materialsControls" class="materials-controls">
                <input type="file" id="fileUpload" multiple accept=".pdf,.docx,.txt">
                <input type="text" id="materialCollege" placeholder="Target College (optional)" class="material-college">
                <div class="material-row">
                    <select id="materialDeptSelect" class="material-dept-select"></select>
                    <input id="materialDeptNew" placeholder="Add Dept" class="material-dept-new">
                    <button onclick="(function(){ const v=document.getElementById('materialDeptNew').value.trim(); if(v){ addDepartment(v); document.getElementById('materialDeptSelect').value=normalizeStr(v); document.getElementById('materialDeptNew').value=''; } })()">Add</button>
                </div>
                <button onclick="uploadFile()">Upload</button>
            </div> 
            <div id="materialsInfo" class="materials-info"></div>
            <ul class="file-list" id="fileList"></ul>
        </section>

        <section id="fees" class="section">
            <h2>ğŸ’° Fee Status</h2>
            <div id="feesControls" class="fees-controls">
                <input type="text" id="feeRegNo" placeholder="Register No (e.g., CS21B001)" class="fee-input">
                <input type="text" id="feeType" placeholder="Fee Type (e.g., Tuition)" class="fee-input">
                <input type="number" id="feeAmount" placeholder="Amount" class="fee-amount fee-input">
                <select id="feeStatus" class="fee-input">
                    <option value="Pending">Pending</option>
                    <option value="Paid">Paid</option>
                </select>
                <input type="date" id="feeDueDate" class="fee-due">
                <button onclick="addFee()">Add</button>
            </div>
            <div class="table-responsive">
                <table id="feesTable">
                    <thead><tr><th>Register No</th><th>Fee Type</th><th>Amount</th><th>Status</th><th>Due Date</th></tr></thead>
                    <tbody id="feesBody"></tbody>
                </table>
            </div>
        </section>

        <section id="suggestions" class="section">
            <h2>ğŸ’¡ Suggestion & Complaint Box</h2>
            <div style="margin-bottom: 15px;">
                <label style="margin-right: 20px;">
                    <input type="radio" name="suggestionType" value="suggestion" checked> ğŸ“ Suggestion
                </label>
                <label>
                    <input type="radio" name="suggestionType" value="complaint"> âš ï¸ Complaint
                </label>
            </div>
            <textarea id="suggestionText" placeholder="Enter your suggestion or complaint anonymously..." rows="5"></textarea>
            <button onclick="submitSuggestion()">Submit</button>
            <div id="suggestionStatus"></div>
        </section>

        <section id="students" class="section">
            <h2>ğŸ‘¥ Students</h2>
            <div id="studentsList"></div>
        </section>

        <section id="teacherManagement" class="section">
            <h2>ğŸ“‹ Manage Announcements</h2>
            <div class="teacher-mgmt-container">
                <div class="teacher-mgmt-filters">
                    <input type="text" id="teacherFilterText" placeholder="Search announcements..." class="input-small">
                    <select id="teacherFilterCollege" class="select-small">
                        <option value="">All Colleges</option>
                    </select>
                    <select id="teacherFilterDept" class="select-small">
                        <option value="">All Departments</option>
                    </select>
                    <button onclick="filterTeacherAnnouncements()" class="btn-action">Filter</button>
                    <button onclick="resetTeacherFilters()" class="btn-cancel">Reset</button>
                </div>
                <div id="teacherAnnouncementsList" class="announcements"></div>
            </div>
        </section>

        <section id="principal" class="section">
            <h2>ğŸ« Principal Dashboard - Teacher Login Monitor</h2>
            <div class="dashboard-container">
                <div class="dashboard-panel" style="grid-column: 1 / -1;">
                    <h3>ğŸ‘¨â€ğŸ« Teachers Currently Logged In in Your College</h3>
                    <p class="panel-description">Click on any teacher card to view their profile and activities</p>
                    <div id="principalTeachersList"></div>
                </div>
                <div class="dashboard-panel" style="grid-column: 1 / -1;">
                    <h3>ğŸ’¬ Student Complaints & Suggestions</h3>
                    <p class="panel-description">Direct feedback from students in your college</p>
                    <div id="principalSuggestions"></div>
                </div>
            </div>
        </section>

        <section id="admin" class="section">
            <h2>âš™ï¸ System Admin Dashboard - Login Monitor</h2>
            <div class="dashboard-container">
                <div class="dashboard-panel">
                    <h3>ğŸ” Login/Logout Details</h3>
                    <p class="panel-description">Real-time view of all user logins and logouts across all colleges</p>
                    <div id="adminActivityList" class="activity-list"></div>
                </div>
                <div class="dashboard-panel">
                    <h3>ğŸ¢ College Login Summary</h3>
                    <p class="panel-description">Which colleges are active today and login details</p>
                    <div id="adminCollegeStats"></div>
                </div>
                <div class="dashboard-panel">
                    <h3>ğŸ“Š System Overview</h3>
                    <div id="adminStats" class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Total Users:</span>
                            <span id="statAdminTotal" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Online Now:</span>
                            <span id="statAdminOnline" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Today's Logins:</span>
                            <span id="statAdminLogins" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Activities:</span>
                            <span id="statAdminActivities" class="stat-value">0</span>
                        </div>
                    </div>
                </div>
                <div class="dashboard-panel">
                    <h3>ğŸ”§ Admin Actions</h3>
                    <button onclick="exportAppData()" class="btn-action">ğŸ“¥ Export App Data</button>
                    <button onclick="clearActivityLog()" class="btn-action">ğŸ—‘ï¸ Clear Activity Log</button>
                </div>
            </div>
        </section>
    </div> 

    <script src="app.js"></script>

    <!-- Debug console UI -->
    <!-- Principal Teacher Profile Modal -->
    <div id="principalTeacherProfile" style="display: none;"></div>

    <div id="debugToggle" class="debug-toggle" title="Toggle Debug Console" onclick="toggleDebug()">ğŸ</div>
    <div id="debugPanel" class="debug-panel debug-hidden">
        <div class="debug-header">
            <div>Debug Console</div>
            <div class="debug-controls">
                <button onclick="debugClear()">Clear</button>
                <button onclick="toggleDebug(false)">Close</button>
            </div>
        </div>
        <div id="debugBody" class="debug-body"></div>
    </div>
</body>
</html>
